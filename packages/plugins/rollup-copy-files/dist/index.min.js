import e from"fs-extra";import i from"path";import t from"os";import r from"terser";async function a(a,n,o,c,s){if(c){let i="";try{i=e.readFileSync(c,"utf-8")}catch(i){e.createFileSync(c)}const r=e.readFileSync(a,"utf-8");e.writeFileSync(c,`${l=i,l.endsWith(t.EOL)?l:l+t.EOL}\n${r}`)}else{const{base:t,name:c,ext:l}=i.parse(a),f=o?o(c,l.replace(".","")):t,m=i.join(n,f);if(s){const i=e.readFileSync(a,"utf-8"),t=await r.minify(i,{sourceMap:!0});e.createFileSync(m),e.writeFileSync(m,t.code)}else await e.copy(a,m)}var l}function n({src:e,dest:i="dist/",hook:t="generateBundle",rename:r,file:n,minify:o=!1}={}){if(!e)throw new Error("src option missing");return{name:"copy-files",[t]:async()=>{const{globby:t}=await import("globby"),c=await t(e,{expandDirectories:!1});await Promise.all(c.map((e=>a(e,i,r,n,o))))}}}export{n as copyFiles};
