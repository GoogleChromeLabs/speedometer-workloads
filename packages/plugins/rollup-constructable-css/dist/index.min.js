import t from"fs-extra";import e from"path";import r from"strip-comments";function a({src:a,dest:o="dist/",hook:n="generateBundle"}={}){if(!a)throw new Error("src option missing");return{name:"constructable-css",[n]:async()=>{const{globby:n}=await import("globby"),i=await n(a,{expandDirectories:!1});await Promise.all(i.map((a=>async function(a,o){const n=await t.readFile(a,"utf-8"),i=`const sheet = new CSSStyleSheet();\nsheet.replaceSync(\`${r(n)}\`);\nexport default sheet;\n`,{name:s}=e.parse(a),c=`${s}.constructable.js`,m=e.join(o,c);await t.createFile(m),await t.writeFile(m,i)}(a,o))))}}}export{a as constructableCSS};
